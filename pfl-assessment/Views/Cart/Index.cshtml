@using pfl_assessment.Models.Json.Orders
@using pfl_assessment.Models.Json.Products
@model List<Item>
@{
    ViewData["Title"] = "Cart";
}


<h2>Your Cart</h2>
@if (Model.Count == 0)
{
    <div class="alert alert-info" role="alert">
        Your cart is empty.
        @Html.ActionLink("Start shopping!", "Index", "Store")
    </div>
}
else
{
    <div class="d-md-flex flex-column">
        @foreach (Item item in Model)
        {
            @Html.Partial("_ItemRowView", item)
        }
    </div>
}

@{
    if (ViewData["customer"] == null)
    {
        ViewData["Customer"] = new Customer();
    }
    Customer customer = (Customer)ViewData["Customer"];
}
    <div class="row">
        @Html.Partial("_CustomerShipmentForm", customer)

        @if (Model.Count > 0 && ViewData["pricedOrder"] != null)
        {
            OrderPayload pricedOrder = (OrderPayload)ViewData["pricedOrder"];
            <div class="col">
                <h5>Your Price</h5>
                @using (Html.BeginForm("Place", "Order"))
                {
                    <table>
                        <tr>
                            <td>
                                @Html.Label("Printing Price")
                            </td>
                            <td>
                                @pricedOrder.OrderPrices.PrintPriceTotal
                            </td>
                        </tr>
                        <tr>
                            <td>
                                @Html.Label("Shipping Price")
                            </td>
                            <td>
                                @pricedOrder.OrderPrices.ShipPriceTotal
                            </td>
                        </tr>
                        <tr>
                            <td>
                                @Html.Label("Order Total")
                            </td>
                            <td>
                                @pricedOrder.OrderPrices.OrderTotalPrice
                            </td>
                        </tr>
                    </table>
                    <input type="submit" name="submit" value="Place order" />
                }
            </div>
        }
    </div>
